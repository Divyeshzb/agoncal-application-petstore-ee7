# ********RoostGPT********

# Test generated by RoostGPT for test lseg-integration using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# ROOST_METHOD_HASH=ba3a9a7478
# ROOST_METHOD_SIG_HASH=78c3d58e4e
# 
#    ########## Scenario ##########  
# 
# {
#   background: null,
#   rule: null,
#   scenario: 'Check the load capacity of the Login page\n' +
#     "Given a load testing tool and the application endpoint '/login'\n" +
#     'When I simulate multiple simultaneous logins\n' +
#     "Then the response status for each should be either 200 or 429, indicating 'Too Many Requests'",
#   title: 'Check the load capacity of the Login page'
# }
# 

# ********RoostGPT********
config:
  target: "{{ $processEnvironment.API_HOST }}"
  plugins:
    expect: {}
  payloads:
    - path: "CheckLoadCapacityOfLoginPage.csv"
      fields:
        - "username"
        - "password"
      skipHeader: true

scenarios:
  # First scenario is to check accessibility of login page.
  - name: "Load test on Login Page - Stage 1"
    flow:
      - get:
          url: "/login"
          headers: {}
          # No error codes should be returned when accessing the login page.
          expect:
            - statusCode: 200
          # There is a wait of 1 second after the request to the login page.
          think: 1
          # Log message to confirm that login page is accessible.
          log: "Login page is accessible."
  # Second scenario is to check multiple simultaneous logins.
  - name: "Load test on Login Page - Stage 2"
    flow:
      - post:
          url: "/login"
          headers:
            username: "{{ username }}"
            password: "{{ password }}"
          json: {}
          # Status 200 or 429 are expected when multiple logins are attempted.
          expect:
            - statusCode: [200, 429]
          # User is either logged in successfully or a limit has been hit.
          think: 1
          # Log message to confirm that multiple login attempts return either a 200 or a 429 status code.
          log: "Multiple login attempts either return a 200 or a 429 status code."
