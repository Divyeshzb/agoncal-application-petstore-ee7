# ********RoostGPT********

# Test generated by RoostGPT for test lseg-integration using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# ROOST_METHOD_HASH=e98ba82ecd
# ROOST_METHOD_SIG_HASH=a9347404e8
# 
#    ########## Scenario ##########  
# 
# {
#   background: null,
#   rule: null,
#   scenario: 'Check the login functionality when fields are kept empty\n' +
#     'Given the application login page is accessed\n' +
#     "When I send a POST request with empty 'Username' and 'Password' fields\n" +
#     'Then the response status should be 400\n' +
#     "And the response body should contain 'Username and Password cannot be empty'",
#   title: 'Check the login functionality when fields are kept empty'
# }
# 

# ********RoostGPT********
config:
  target: "{{ $processEnvironment.API_HOST }}"
  plugins:
    expect: {}
  payload:
    path: "CheckLoginFunctionalityWithEmptyFields.csv"
    skipHeader: true
    fields:
      - "Username"
      - "Password"
  phases:
    - duration: 60
      arrivalRate: 20
  processors: {}

scenarios:
  - name: Check the login functionality when fields are kept empty
    flow:
      - get:
          url: "/login"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          expect:
            - statusCode: 200
            - hasProperty: 'headers'
            - hasProperty: 'body'
        # Ensure the login page is accessible
        log: "Login page is accessible"
        # Pause for 1 second
        think: 1
      - post:
          url: "/login"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
            username: "{{ Username }}"
            password: "{{ Password }}"
          expect:
            - statusCode: 400
            - hasProperty: 'headers'
            - hasProperty: 'body'
            - equals: 
                - "Username and Password cannot be empty"
                - "{{ response.body }}"
        # Log that a POST request with empty 'Username' and 'Password' responded with error
        log: "POST Request with empty 'Username' and 'Password' responded with error"
        # Pause for 1 second
        think: 1
