# ********RoostGPT********

# Test generated by RoostGPT for test lseg-integration using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# ROOST_METHOD_HASH=51c8176ca9
# ROOST_METHOD_SIG_HASH=53eac7059f
# 
#    ########## Scenario ##########  
# 
# {
#   background: null,
#   rule: null,
#   scenario: 'Check Password visibility toggle\n' +
#     'Given the application login page is accessed\n' +
#     "When I click on the 'Password Visibility' toggle\n" +
#     "Then the 'Password' field type should be set to 'text'\n" +
#     "When I click on the 'Password Visibility' toggle again\n" +
#     "Then the 'Password' field type should be set to 'password'",
#   title: 'Check Password visibility toggle'
# }
# 

# ********RoostGPT********
config:
  target: "{{ $processEnvironment.API_HOST }}"
  plugins:
    expect: {}
  payloads:
    - path: "CheckPasswordVisibilityToggle.csv"
      fields:
        - "passwordVisibility"
      skipHeader: true
      variable: "payloadVariable"
  
scenarios:
  - name: Check Password visibility toggle
    flow:
      - name: Access application login page
        get:
          url: "/login"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          expect:
            - statusCode: 200

          # Log statement to indicate that the APP login page is accessed
        log: "App login page is accessible"
        think: 1

      - name: Click on the Password Visibility toggle
        post:
          url: "/login"
          json:
            passwordVisibility: "{{ payloadVariable.passwordVisibility }}"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          expect:
            - statusCode: 200
            - hasProperty: "passwordFieldType"
            - equals:
                passwordFieldType: "text"

          # Log statement to indicate that the Password Visibility is checked
        log: "Password visibility toggle is switched on"
        think: 1

      - name: Click on the Password Visibility toggle again
        post:
          url: "/login"
          json:
             passwordVisibility: "{{ payloadVariable.passwordVisibility }}"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          expect:
            - statusCode: 200
            - hasProperty: "passwordFieldType"
            - equals:
                passwordFieldType: "password"

          # Log statement to indicate that the Password Visibility is unchecked
        log: "Password visibility toggle is switched off"
        think: 1
