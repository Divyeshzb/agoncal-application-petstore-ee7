# ********RoostGPT********

# Test generated by RoostGPT for test lseg-integration using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# ROOST_METHOD_HASH=c34ff5b82c
# ROOST_METHOD_SIG_HASH=ea854dd943
# 
#    ########## Scenario ##########  
# 
# {
#   background: null,
#   rule: null,
#   scenario: 'Check the Login functionality with invalid user credentials\n' +
#     'Given the application login page is accessed\n' +
#     "When I send a POST request with invalid 'Username' and 'Password'\n" +
#     'Then the response status should be 403\n' +
#     "And the response body should contain 'Invalid Credentials'",
#   title: 'Check the Login functionality with invalid user credentials'
# }
# 

# ********RoostGPT********
config:
  target: "{{ $processEnvironment.API_HOST }}"
  processor: "./my-processor.js"
  payload:
    path: "InvalidCredentialsLoginCheck.csv"
    skipHeader: true
    fields:
      - "username"
      - "password"
  phases:
    - duration: 60
      arrivalRate: 20
  plugins:
    expect: {}
scenarios:
  - name: "Check the Login functionality with invalid user credentials"
    flow:
      # This operation checks the accessibility of the login page
      - get: 
          url: "/login"
          expect:
            - statusCode: 200  # Expect a successful response
            # No response headers expected
            # No authorization required for this request

      # This operation pauses the test execution for further requests
      - think: 3

      # This operation sends a POST request with invalid login credentials
      - post:
          url: "/login"
          # Apply the headers of the POST request: username and password fields
          headers:
            username: "{{ username }}"
            password: "{{ password }}"
            Content-Type: "application/json"
          expect:
            - statusCode: 403  # Expect a Forbidden error status
            - hasProperty: "msg"
            - equals: 
                msg: "Invalid Credentials"
            # No authorization required for this request
          # No request payload expected
          beforeRequest: "logMessage"
